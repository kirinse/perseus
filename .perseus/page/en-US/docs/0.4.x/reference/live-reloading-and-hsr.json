{"content":"<header data-hk=\"1.1\" class=\"shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20\"><div data-hk=\"1.2\" class=\"flex justify-between\"><a data-hk=\"1.3\" class=\"justify-self-start self-center m-3 ml-5 text-md sm:text-2xl\" href=\"en-US/\">Perseus</a><div data-hk=\"1.4\" class=\"md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 \"><div data-hk=\"1.5\" class=\"tham-box\"><div data-hk=\"1.6\" class=\"dark:bg-white tham-inner\"></div></div></div><nav data-hk=\"1.7\" class=\"hidden md:flex\"><ul data-hk=\"1.8\" class=\"mr-5 flex\"><li data-hk=\"2.0\" class=\"m-3 p-1\"><a data-hk=\"2.1\" href=\"en-US/docs\" class=\"px-2\">Docs</a></li><li data-hk=\"2.2\" class=\"m-3 p-1\"><a data-hk=\"2.3\" href=\"en-US/comparisons\" class=\"px-2\">Comparisons</a></li><li data-hk=\"2.4\" class=\"m-3 p-1\"><a data-hk=\"2.5\" href=\"en-US/plugins\" class=\"px-2\">Plugins</a></li></ul></nav></div><nav data-hk=\"1.9\" id=\"mobile_nav_menu\" class=\"md:hidden w-full text-center justify-center overflow-y-scroll hidden\"><div data-hk=\"1.10\" class=\"mr-5 overflow-y-scroll\" style=\"max-height: 500px\"><ul data-hk=\"1.11\"><li data-hk=\"3.0\" class=\"m-3 p-1\"><a data-hk=\"3.1\" href=\"en-US/docs\" class=\"px-2\">Docs</a></li><li data-hk=\"3.2\" class=\"m-3 p-1\"><a data-hk=\"3.3\" href=\"en-US/comparisons\" class=\"px-2\">Comparisons</a></li><li data-hk=\"3.4\" class=\"m-3 p-1\"><a data-hk=\"3.5\" href=\"en-US/plugins\" class=\"px-2\">Plugins</a></li></ul><hr data-hk=\"1.12\"/><div data-hk=\"1.13\" class=\"text-left p-3\"><!--#--><!----><select data-hk=\"4.4\" class=\"p-2 rounded-md text-white bg-indigo-500\"><option data-hk=\"4.5\" value=\"next\">Next (unreleased)</option><option data-hk=\"4.0\" value=\"0.4.x\" selected=\"\">v⁨0.4.x⁩ (beta)</option><option data-hk=\"4.6\" value=\"0.3.4\">v⁨0.3.4⁩ (stable)</option><option data-hk=\"4.1\" value=\"0.3.0-0.3.3\">v⁨0.3.0-0.3.3⁩ (outdated)</option><option data-hk=\"4.2\" value=\"0.2.x\">v⁨0.2.x⁩ (outdated)</option><option data-hk=\"4.3\" value=\"0.1.x\">v⁨0.1.x⁩ (outdated)</option></select><!--/--><div data-hk=\"1.14\" class=\"docs-links-markdown\"><h1>Introduction</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/intro\">Introduction</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/what-is-perseus\">What is Perseus?</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/intro\">Getting Started</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/installation\">Installation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/first-app\">Your First App</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/core-principles\">Core Principles</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/tutorials/second-app\">Your Second App</a></li>\n</ul>\n<h1>Reference</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/features\">Feature Discovery Terminal</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/compilation-times\">Improving Compilation Times</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/state-generation\">State Generation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/live-reloading-and-hsr\">Live Reloading and HSR</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/i18n\">Internationalization</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/hydration\">Hydration</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/exporting\">Static Exporting</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/plugins\">Plugins</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/deploying\">Deploying</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/architecture\">Architecture Details</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/router\">Router</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/initial_subsequent_loads\">Initial vs. Subsequent Loads</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/migrating\">Migrating from v0.3.x</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/faq\">Common Pitfalls and Known Bugs</a></li>\n</ul>\n</div></div></div></nav></header><div data-hk=\"1.15\" class=\"mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex\"><div data-hk=\"1.16\" class=\"flex w-full\"><div data-hk=\"1.17\" class=\"h-full hidden md:block max-w-xs w-full border-r\"><div data-hk=\"1.18\" class=\"mr-5\"><div data-hk=\"1.19\" class=\"text-left text-black dark:text-white p-3\"><aside data-hk=\"1.20\"><!--#--><!----><select data-hk=\"5.4\" class=\"p-2 rounded-md text-white bg-indigo-500\"><option data-hk=\"5.5\" value=\"next\">Next (unreleased)</option><option data-hk=\"5.0\" value=\"0.4.x\" selected=\"\">v⁨0.4.x⁩ (beta)</option><option data-hk=\"5.6\" value=\"0.3.4\">v⁨0.3.4⁩ (stable)</option><option data-hk=\"5.1\" value=\"0.3.0-0.3.3\">v⁨0.3.0-0.3.3⁩ (outdated)</option><option data-hk=\"5.2\" value=\"0.2.x\">v⁨0.2.x⁩ (outdated)</option><option data-hk=\"5.3\" value=\"0.1.x\">v⁨0.1.x⁩ (outdated)</option></select><!--/--><div data-hk=\"1.21\" class=\"docs-links-markdown\"><h1>Introduction</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/intro\">Introduction</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/what-is-perseus\">What is Perseus?</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/intro\">Getting Started</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/installation\">Installation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/first-app\">Your First App</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/core-principles\">Core Principles</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/tutorials/second-app\">Your Second App</a></li>\n</ul>\n<h1>Reference</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/features\">Feature Discovery Terminal</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/compilation-times\">Improving Compilation Times</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/state-generation\">State Generation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/live-reloading-and-hsr\">Live Reloading and HSR</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/i18n\">Internationalization</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/hydration\">Hydration</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/exporting\">Static Exporting</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/plugins\">Plugins</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/deploying\">Deploying</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/architecture\">Architecture Details</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/router\">Router</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/initial_subsequent_loads\">Initial vs. Subsequent Loads</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/migrating\">Migrating from v0.3.x</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/faq\">Common Pitfalls and Known Bugs</a></li>\n</ul>\n</div></aside></div></div></div><div data-hk=\"1.22\" class=\"h-full flex w-full\"><div data-hk=\"1.23\" class=\"px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl\"><!--#--><div data-hk=\"1.24\" class=\"ring-4 ring-yellow-300 p-4 rounded-lg mt-1\"><div data-hk=\"1.25\" class=\"flex flex-col 2xs:flex-row dark:text-white\"><span data-hk=\"1.26\" class=\"self-center mr-2\" style=\"fill: #fcd34d;\"><svg xmlns=\"http://www.w3.org/2000/svg\" height=\"auto\" viewBox=\"0 0 24 24\" width=\"2.25rem\" fill=\"\\#000000\"><path d=\"M12 5.99L19.53 19H4.47L12 5.99M2.74 18c-.77 1.33.19 3 1.73 3h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18zM11 11v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zm0 5h2v2h-2z\"/></svg></span><p data-hk=\"1.27\">This version of the documentation is for a version that has only been released in beta, and is not yet stable. Features documented here may not be present in the latest stable version, and they're subject to rapid and drastic change. You can see the latest stable version of the docs <a href=\"en-US/docs/0.3.4/intro\" class=\"underline\">here</a>.</p></div></div><!--/--><main data-hk=\"1.28\" class=\"text-black dark:text-white\"><div data-hk=\"1.0\" class=\"markdown\"><h1>Live Reloading and HSR</h1>\n<p>When you develop with Perseus, you can add the <code>-w</code> flag to either <code>perseus serve</code> or <code>perseus export</code> to automatically rebuild your app whenever you change any code in your project. When you do, any browsers connected to the development version of your app will also be automatically reloaded, which allows for a more rapid development cycle. (If you want faster compile times, use the nightly channel of Rust.)</p>\n<p>This also involves using <em>hot state reloading</em> (HSR), a world first in the non-JavaScript world pioneered by Perseus. This is very similar to <em>hot module reloading</em> (HMR) in JavaScript frameworks, which only changes the bare minimum amount of code necessary to let you preview your changes, meaning the state of your app is kept.</p>\n<p>But what does that actually mean? Well, let's take a simple example. Imagine you're working on a form page that has twelve inputs that all need to be filled out. With HMR, most changes to your code will lead to small substitutions in the browser because of the way JS can be chunked into many small files --- your inputs into the form are preserved even across code changes, which is extremely helpful!</p>\n<p>As you may know, Perseus has the concept of state freezing and thawing inbuilt, which allows you to turn the entire state of your app into a string and then restore your app to a single point of interaction from that, which would allow you to take a user back to exactly where they were after they logged back into your app, for example.</p>\n<p>In development, this system is applied automatically to save your app's state to a string in your browser's storage automatically just after it's rebuilt, and this is then restored after the reload, meaning you're taken back to exactly where you were before you made the code change!</p>\n<p>Of course, there are some cases in which this isn't possible --- namely when you change the data model of your app. So, if you add new parameters to the current page's state, Perseus won't be able to process it, and the previous state will be dumped. If you change the data model for another page though, things will still work, until you go to that page, because of the incremental nature of thawing (something you almost never need to care about). Very occasionally, this can lead to odd behavior, which is immediately fixed by simply reloading the page.</p>\n<p>So, in summary, because Wasm can't be chunked, HMR can't be implemented for Wasm projects, including Perseus ones, so we invented a new way of achieving the same results grounded in the state-based architecture of Perseus, meaning you can easily develop complex flows in your app without losing state every time you change some code.</p>\n<p><em>Note: if you're a developer using another Wasm framework, and you'd like to implement HSR yourself, hop over to our <a href=\"https://discord.com/invite/GNqWYWNTdp\">Discord channel on the Sycamore server</a> if you want to discuss implementation details. All of this is open-source, and we'd be thrilled if HSR were more widely adopted in the Wasm community, to improve the developer experience of all!</em></p>\n</div></main></div></div></div></div><footer data-hk=\"1.29\" class=\"w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep\"><p data-hk=\"1.30\" class=\"dark:text-white mx-5 text-center\"><span data-hk=\"1.31\">© <a href=\"https://github.com/arctic-hen7\" class=\"underline\">arctic-hen7</a> ⁨2021⁩, see license <a href=\"https://github.com/arctic-hen7/perseus/blob/main/LICENSE\" class=\"underline\">here</a>.</span></p></footer><script data-hk=\"0.0\" src=\".perseus/static/prism.js\" defer=\"\"></script><script data-hk=\"0.1\">window.Prism.highlightAll();</script>","state":"{\"title\":\"Live Reloading and HSR\",\"content\":\"<h1>Live Reloading and HSR</h1>\\n<p>When you develop with Perseus, you can add the <code>-w</code> flag to either <code>perseus serve</code> or <code>perseus export</code> to automatically rebuild your app whenever you change any code in your project. When you do, any browsers connected to the development version of your app will also be automatically reloaded, which allows for a more rapid development cycle. (If you want faster compile times, use the nightly channel of Rust.)</p>\\n<p>This also involves using <em>hot state reloading</em> (HSR), a world first in the non-JavaScript world pioneered by Perseus. This is very similar to <em>hot module reloading</em> (HMR) in JavaScript frameworks, which only changes the bare minimum amount of code necessary to let you preview your changes, meaning the state of your app is kept.</p>\\n<p>But what does that actually mean? Well, let's take a simple example. Imagine you're working on a form page that has twelve inputs that all need to be filled out. With HMR, most changes to your code will lead to small substitutions in the browser because of the way JS can be chunked into many small files --- your inputs into the form are preserved even across code changes, which is extremely helpful!</p>\\n<p>As you may know, Perseus has the concept of state freezing and thawing inbuilt, which allows you to turn the entire state of your app into a string and then restore your app to a single point of interaction from that, which would allow you to take a user back to exactly where they were after they logged back into your app, for example.</p>\\n<p>In development, this system is applied automatically to save your app's state to a string in your browser's storage automatically just after it's rebuilt, and this is then restored after the reload, meaning you're taken back to exactly where you were before you made the code change!</p>\\n<p>Of course, there are some cases in which this isn't possible --- namely when you change the data model of your app. So, if you add new parameters to the current page's state, Perseus won't be able to process it, and the previous state will be dumped. If you change the data model for another page though, things will still work, until you go to that page, because of the incremental nature of thawing (something you almost never need to care about). Very occasionally, this can lead to odd behavior, which is immediately fixed by simply reloading the page.</p>\\n<p>So, in summary, because Wasm can't be chunked, HMR can't be implemented for Wasm projects, including Perseus ones, so we invented a new way of achieving the same results grounded in the state-based architecture of Perseus, meaning you can easily develop complex flows in your app without losing state every time you change some code.</p>\\n<p><em>Note: if you're a developer using another Wasm framework, and you'd like to implement HSR yourself, hop over to our <a href=\\\"https://discord.com/invite/GNqWYWNTdp\\\">Discord channel on the Sycamore server</a> if you want to discuss implementation details. All of this is open-source, and we'd be thrilled if HSR were more widely adopted in the Wasm community, to improve the developer experience of all!</em></p>\\n\",\"sidebar_content\":\"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/intro\\\">Introduction</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/what-is-perseus\\\">What is Perseus?</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/intro\\\">Getting Started</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/installation\\\">Installation</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/getting-started/first-app\\\">Your First App</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/core-principles\\\">Core Principles</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/tutorials/second-app\\\">Your Second App</a></li>\\n</ul>\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/features\\\">Feature Discovery Terminal</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/compilation-times\\\">Improving Compilation Times</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/state-generation\\\">State Generation</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/live-reloading-and-hsr\\\">Live Reloading and HSR</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/i18n\\\">Internationalization</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/hydration\\\">Hydration</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/exporting\\\">Static Exporting</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/plugins\\\">Plugins</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/deploying\\\">Deploying</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/architecture\\\">Architecture Details</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/router\\\">Router</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/initial_subsequent_loads\\\">Initial vs. Subsequent Loads</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/migrating\\\">Migrating from v0.3.x</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.4.x/reference/faq\\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n\",\"status\":\"Beta\",\"manifest\":{\"0.2.x\":{\"state\":\"outdated\",\"git\":\"v0.2.3\",\"docs_rs\":\"0.2\"},\"0.1.x\":{\"state\":\"outdated\",\"git\":\"v0.1.4\",\"docs_rs\":\"0.1\"},\"0.3.0-0.3.3\":{\"state\":\"outdated\",\"git\":\"v0.3.3\",\"docs_rs\":\"0.3.3\"},\"0.3.4\":{\"state\":\"stable\",\"git\":\"eccf137032fbe8e6507be9e9317edc16e7576a4f\",\"docs_rs\":\"0.3\"},\"0.4.x\":{\"state\":\"beta\",\"git\":\"HEAD\",\"docs_rs\":\"0.4.0-beta\"}},\"current_version\":\"0.4.x\"}","head":"<title>Live Reloading and HSR | Perseus Docs</title><link rel=\"stylesheet\" href=\".perseus/static/styles/markdown.css\"/><link rel=\"stylesheet\" href=\".perseus/static/styles/docs_links_markdown.css\"/><link rel=\"stylesheet\" href=\".perseus/static/prism.css\"/>"}